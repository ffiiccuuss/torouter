Freedom-Maker  -  Bdale's building tools for the FreedomBox project

Install required build packages:
	apt-get install multistrap qemu-user-static

To build for a DreamPlug, use

	sudo ./mk_dreamplug_rootfs

This will yield a file tree under build/dreamplug, representing the
contents of a root file system.  Get that onto a USB stick with something
like

	sudo mount /dev/sdc1 /media/freedom
	sudo rsync -atvz --progress build/dreamplug/ /media/freedom/
	sudo umount /media/freedom

Move the USB stick to the DreamPlug, and arrange to boot the existing kernel
from internal microSD pointing to our new root filesystem by interrupting the
boot to talk to U-Boot:

	setenv x_bootargs_root root=/dev/sdc1 rootdelay=10
	saveenv
	reset

The system should boot to a login prompt.

- - - - -

If you want to set things up to boot from the internal microSD card, once
you're logged into the system booted from root on USB stick you can use:

	sh /boot/copy2dream.sh

- - - - -

Be aware that this is an imcomplete solution for now .. you will want to at
least do things like create unique ssh host keys for your device!
